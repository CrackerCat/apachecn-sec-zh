# 零、序言

渗透测试已经成为验证和保护小型和大型企业安全的非常有效的方法。渗透测试的目的是通过全面枚举和利用组织内的对象、服务和流程来评估漏洞的影响。这本书的重点是使用经过改编的渗透测试版本，并将其应用于道德黑客攻击和保护 AWS 流行的云服务。

# 这本书是给谁的

本书面向对云技术有基本了解的学生和专业人士，他们希望获得 AWS 和渗透测试方面的实际安全知识。

# 这本书涵盖的内容

[*第 1 章*](01.html#_idTextAnchor025)*构建您的 AWS 环境*从 AWS 的基础知识开始。AWS 是一个不断发展的云技术提供商，许多公司都在使用它来存储数据。本章将帮助您了解基本 AWS 环境是如何创建的，以及可在包含的环境中利用的错误配置服务的范围。不需要关于 AWS 的知识，本章将为您提供关于设置自己的 AWS 环境所需的所有知识。

[*第 2 章*](02.html#_idTextAnchor056)*五旬斋和道德黑客*进入了五旬斋本身。五旬斋开始流行起来；对于公司来说，拥有 pentest 并找出他们对自己的系统所不了解的东西已经变得司空见惯了。Pentesting 是一种发现和利用 IT 系统中典型扫描器无法发现的问题的实践。本章将向您简要介绍什么是 pentesting，并为您提供使用 pentesting 工具进行练习的实践。

[*第三章*](03.html#_idTextAnchor098)*探索 Pentesting 和 AWS*对话工具。测试任何东西的第一步总是涉及到扫描系统和资源。Pentesters 使用各种工具和技术来确保正确扫描系统并尽可能多地列举信息。本章将重点介绍如何使用 NMAP 和 Metasploit 从目标中获取信息，以便进一步利用这些信息。

[*第四章*](04.html#_idTextAnchor171)*利用 S3 铲斗*涵盖 S3 铲斗。S3 存储桶是 AWS 用来保存数据的主要资源之一。S3 存储桶也称为简单存储服务桶，是保存数据和元数据等对象的好方法。然而，与其他文件存储解决方案非常相似，S3 存储桶可以通过简单的错误配置轻松利用。这些错误配置可能导致数据泄漏和其他严重的安全问题。本章将重点介绍 S3 存储桶及其功能，以及如何利用公共存储桶和配置错误的存储桶的问题。

[*第 5 章*](05.html#_idTextAnchor227)*了解易受攻击的 RDS 服务*探索另一个 AWS 漏洞。**亚马逊关系数据库服务**（**RDS**）具有可扩展性，可以轻松建立基于云的数据库，让用户像操作典型数据库一样操作。RDS 允许用户通过 MySQL 和 Amazon Aurora 等服务进行交互，就像用户在典型的物理数据库基础设施中进行交互一样。RDS 的崩溃与常规数据库的崩溃是一样的：注入和错误配置。本章将讨论常见的错误配置以及它们如何导致可能的注入。

[*第 6 章*](06.html#_idTextAnchor281)*建立并测试 AWS 极光 RDS*，继续关注数据库。AWS Aurora 简单地为 AWS 帐户提供了类似 SQL 的数据库功能。Aurora 专注于类似 PostgreSQL 和 MySQL 的查询，用户可以轻松地与高性能存储系统交互。但是，错误可能会带来致命的代价，如果没有足够的安全性，可能会导致数据泄漏。本章将讨论 Aurora 提供的服务的细节，同时也将探讨 SQL 注入的危险性——一种针对托管 MySQL 等服务的网站的恶意攻击。

[*第 7 章*](07.html#_idTextAnchor309)*评估和测试 Lambda 服务*继续讨论 Lambda。Lambda 允许用户创建代码，以便稍后根据需要响应事件。这些事件是在 AWS 环境中发生的任何事件，例如 HTTP 请求、对 S3 存储桶的修改或新的 EC2 实例。本章将重点介绍 Lambda 中的漏洞发现如何导致对服务的利用以及内部进程和对象的发现。

[*第 8 章*](08.html#_idTextAnchor329)*评估 AWS API 网关*，重点关注 API 网关。AWS API 网关充当承载数据的应用程序的网关。这些应用程序承载的数据各不相同；然而，事实并非如此，一些数据可能被认为对未经授权的人员具有吸引力。本章将讨论什么是 AWS API 网关，如何检查 API 调用，以及如何通过测试 API 调用来纠正问题。

[*第 9 章*](09.html#_idTextAnchor381)、*现实生活中与 Metasploit 的五旬斋等等！*，潜入后倾。Metasploit 是一个自动化的 pentesting 工具，可轻松利用 pentesters。Metasploit 提供了利用有效负载的功能，已成为测试常见漏洞的流行工具。Metasploit 还附带 MeterMeter 外壳，允许 pentesters 在攻击系统上具有反向连接。反向外壳允许 Pentester 基于权限进行一定程度的控制，从而使旋转和盗窃变得简单。本章将实际介绍如何使用 Metasploit 在真实环境中测试 AWS 环境。

[*第 10 章*](10.html#_idTextAnchor438)*五项测试最佳实践*是我们认识到五项测试不是一种一刀切的评估类型。适用于一个圣灵降临节的东西可能不适用于另一个圣灵降临节。掌握潮流，磨练你的技能，发展你对 pentest 意味着什么的理解是至关重要的。本章将讨论维护测试技能和更新流程的最佳实践，以及如何跟上测试进度。

[*第 11 章*](11.html#_idTextAnchor502)*远离麻烦*关注你将要做的事情的潜在影响。Pentesting 可能会对 AWS 系统造成干扰，如果执行不正确，还可能导致法律问题。在测试 AWS 时，了解作为 pentester 的您可以在 AWS 系统上做什么和不能做什么是至关重要的。本章将介绍 pentesting AWS 的应做事项和不应做事项，并讨论拒绝服务、洪水以及这些技术对 pentest 团队可能产生的法律影响。

[*第 12 章*](12.html#_idTextAnchor516)*其他与 AWS*合作的项目，解释了 AWS 在市场空间上还是相当新的，但正在大规模普及。这一增长导致许多安全服务机构为公司创建培训平台，以便在 AWS pentesting 的“安全空间”进行测试和培训。本章将介绍可以集成以增强 AWS 测试方法的各种项目。

# 充分利用这本书

本书要求您在全文中在各种操作系统上安装特定程序。请注意，尽管某些软件版本可能因更新而不匹配，但安装方法将保持不变。

![](img/B15630_Preface_Table.jpg)

**如果您使用的是本书的数字版本，我们建议您自己键入代码或通过 GitHub 存储库访问代码（下一节提供链接）。这样做将帮助您避免与复制和粘贴代码相关的任何潜在错误。**

在完成本书之后，我强烈建议您花一些时间调整本书中所学的策略和技术，并将其融入您的工作场所的方法中。

# 下载示例代码文件

您可以从 GitHub 的[下载本书的示例代码文件 https://github.com/PacktPublishing/AWS-Penetration-Testing](https://github.com/PacktPublishing/AWS-Penetration-Testing) 。如果代码有更新，它将在现有 GitHub 存储库中更新。

我们的丰富书籍和视频目录中还有其他代码包，请访问[https://github.com/PacktPublishing/](https://github.com/PacktPublishing/) 。看看他们！

# 运行中的代码

这本书的代码在行动视频可以在 https://bit.ly/3kSoMQT.

# 下载彩色图片

我们还提供了一个 PDF 文件，其中包含本书中使用的屏幕截图/图表的彩色图像。您可以在这里下载：[http://www.packtpub.com/sites/default/files/downloads/9781839216923_ColorImages.pdf](http://www.packtpub.com/sites/default/files/downloads/9781839216923_ColorImages.pdf) 。

# 使用的约定

本书中使用了许多文本约定。

**文本中的代码**：表示文本中的码字、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 句柄。下面是一个示例：“**aws**：此命令允许您与 aws 环境交互。”

当我们希望提请您注意代码块的特定部分时，相关行或项目以粗体显示：

**设置 RHOSTS<<极光实例>>**

**设置用户名管理员**

**将停止设置为成功**

**设置密码文件 AuroraPasswords.txt**

任何命令行输入或输出的编写方式如下：

$aws s3api 获取 bucket 策略--bucket packtawspentest--输出文本| python-m json.tool

**粗体**：表示一个新术语、一个重要单词或您在屏幕上看到的单词。例如，菜单或对话框中的单词出现在文本中，如下所示。下面是一个示例：“下一个屏幕将显示**配置选项**图标。”

提示或重要提示

看起来像这样。

# 联系

我们欢迎读者的反馈。

**一般反馈**：如果您对本书的任何方面有疑问，请在邮件主题中注明书名，并发送电子邮件至[customercare@packtpub.com](mailto:customercare@packtpub.com)。

**勘误表**：尽管我们已尽一切努力确保内容的准确性，但还是会出现错误。如果您在本书中发现错误，如果您能向我们报告，我们将不胜感激。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)，选择您的书籍，单击 errata 提交表单链接，然后输入详细信息。

**盗版**：如果您在互联网上发现我们作品的任何形式的非法复制品，请您提供我们的位置地址或网站名称，我们将不胜感激。请致电[与我们联系 copyright@packt.com](mailto:copyright@packt.com)带有指向该材料的链接。

**如果您有兴趣成为一名作家**：如果您对某个主题有专业知识，并且您有兴趣撰写或贡献一本书，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 审查

请留下评论。一旦你阅读并使用了这本书，为什么不在你购买它的网站上留下评论呢？然后，潜在读者可以看到并使用您的无偏见意见做出购买决定，我们 Packt 可以了解您对我们产品的看法，我们的作者可以看到您对他们书籍的反馈。非常感谢。

有关 Packt 的更多信息，请访问[Packt.com](http://packt.com)。