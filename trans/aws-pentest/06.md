# *第 6 章*：设置和测试 AWS 极光 RDS

AWS Aurora 简单地为 AWS 帐户提供了类似 SQL 的数据库功能。Aurora 专注于使用 PostgreSQL 和 MySQL，例如查询，使用户可以轻松地与高性能存储系统交互。然而，这些副作用可能会带来致命的成本，如果没有充分的安全措施，可能会导致数据泄漏。本章将讨论 Aurora 提供的服务的来龙去脉，同时也将探讨**SQL 注入**（**SQLi**）的危险性，这是一种针对承载 MySQL 等服务的网站的恶意攻击。我们还将讨论**拒绝服务**（**DoS**）和**分布式拒绝服务**（**DDoS**的缓解和预防。

在本章中，我们将介绍以下主题：

*   了解和建立极光 RDS
*   白盒/功能性五旬期极光
*   为 SQLi 建立实验室
*   SQLi 的乐趣
*   避免 DDoS

# 技术要求

要遵循本章中的说明，您需要以下内容：

*   Juice Shop 将用于创建我们的 SQli 实验室。更多信息可在此处找到：[https://owasp.org/www-project-juice-shop/](https://owasp.org/www-project-juice-shop/) 。

本章中使用的代码可从以下链接获得：

*   [https://github.com/bkimminich/juice-shop](https://github.com/bkimminich/juice-shop)
*   [https://raw.githubusercontent.com/danielmiessler/SecLists/master/Passwords/Default-Credentials/mssql-betterdefaultpasslist.txt](https://raw.githubusercontent.com/danielmiessler/SecLists/master/Passwords/Default-Credentials/mssql-betterdefaultpasslist.txt)

查看以下视频以查看代码的运行：[https://bit.ly/2TIx2qz](https://bit.ly/2TIx2qz)

# 了解并建立极光 RDS

在[*第 5 章*](05.html#_idTextAnchor227)*了解易受攻击的 RDS 服务*中，我们查看了关系数据库，建立了自己的 RDS 数据库，并实现了 MySQL 作为运行在 RDS 实例上的底层服务。正如你们所看到的，建立一个数据库相对简单，所以现在我们要开始研究极光。

极光的一个好处是简单，这是我们在建立极光集群时要考虑的。因为 Aurora 运行在 RDS 之上，它完成了大部分*繁重的*工作，并允许您像以前一样与一切事物进行交互。极光的另一大好处是安全。Aurora 对静止数据和传输中的数据进行加密。两个级别的加密都可以确保存储或使用的数据的机密性。测试时，诸如**个人身份信息**（**PII**等数据非常敏感，如果发现未加密，应予以披露。

重要提示

如果在 pentest 期间发现 PII 未受保护，pentest 应停止恢复，并应立即通知经理。

Aurora 与 MySQL 和 PostgreSQL 兼容。Aurora 的一大优点是，需要 MySQL 和 PostgreSQL 等服务的工具也可以在 Aurora 中运行。Aurora 使用与 MySQL 和 PostgreSQL 具有相同或相似数据库引擎的数据库引擎构建

接下来，让我们利用我们掌握的一些知识，用 Aurora 和 MySQL 建立一个数据库。

## 建立极光

现在我们已经用 RDS 建立了数据库，设置极光应该相对不那么复杂。如果您还没有，请转至[*第 5 章*](05.html#_idTextAnchor227)*了解易受攻击的 RDS 服务*，并建立数据库，以便您了解使用 AWS 建立数据库的步骤。要向前发展，需要有一个数据库。

如前所述，进入亚马逊 RDS 控制台点击**创建数据库**开始。接下来，按照以下步骤操作：

1.  Select **Standard Create**:

    ![Figure 6.1 – Selecting Standard Create  ](image/Figure_6.01_B15630.jpg)

    图 6.1–选择标准创建

2.  Select **Amazon Aurora with MySQL compatibility**:

    ![Figure 6.2 – Aurora selection ](image/Figure_6.02_B15630.jpg)

    图 6.2–极光选择

3.  Select the **Regional Database** location to fit your location.

    在**数据库功能**屏幕上，选择**一写多读-并行查询**。这是一种很好的方法，因为它允许混合工作负载，而且冗余度要高得多：

    ![Figure 6.3 – One writer and multiple readers - Parallel query ](image/Figure_6.03_B15630.jpg)

    图 6.3–一个编写器和多个读取器-并行查询

4.  在**设置**页面上，为集群命名。一定要记住这个名字。
5.  Set the username and password:

    ![Figure 6.4 – Creating a username and password for your new instance ](image/Figure_6.04_B15630.jpg)

    图 6.4–为新实例创建用户名和密码

6.  选择**密码认证**。
7.  点击**创建数据库**：

![Figure 6.5 – New Aurora cluster ](image/Figure_6.05_B15630.jpg)

图 6.5——新极光星团

我们已经建立了一个我们可以使用的 Aurora 数据库集群。尝试连接到它并测试一些功能，就像您在上一章测试 MySQL 一样，[*第 5 章*](05.html#_idTextAnchor227)*理解易受攻击的 RDS 服务*。

现在我们已经运行了我们的极光实例，让我们开始一个五旬期测试练习，它将演示一个实际的五旬期测试者如何看待与极光五旬期测试相关的*低垂果实*。

重要提示

*低挂果实*很容易利用系统、网络和应用程序中发现的漏洞。

# 白盒/功能性五旬极光

正如我们之前对 RDS 所做的一样，我们将从五旬期测试的角度来观察和了解极光。我们从设置环境开始就知道它，但是为了下一个练习，我们假设我们正在测试一个极光实例。此测试包括查看该实例是否可供公众访问、密码字段的强度，以及查看该实例时可以执行的任何其他操作。

我们希望这样做的原因是在尽可能多的情况下公开白盒测试方法。白盒测试是最常见的测试方法，因为它允许 pentesters 为功能目的和合规目的完全测试所有内容。我们将把它应用到我们的 Aurora 实例中。

我们的约会从扫描极光实例开始。记住，除了实例的地址，我们什么都不知道！

## 侦察-扫描公众访问

像往常一样，我们需要检查实例是否是公共的。我们可以通过使用 NMAP 运行**无 ping**扫描来实现这一点：

$nmap-Pn-vv<<aurora instance="" ip="">></aurora>

这将为我们提供以下输出：

![Figure 6.6 – Scanning Aurora and discovering port 3306 ](image/Figure_6.06_B15630.jpg)

图 6.6–扫描 Aurora 和发现端口 3306

从前面的屏幕截图来看，该实例实际上可以在 MySQL 服务使用的端口**3306**上公开访问。现在我们了解了有关目标主机的以下信息：

*   MySQL 正在使用中。
*   港口**3306**对外开放。

这个信息非常重要，因为我们知道系统运行在 MySQL 的默认端口上，并且我们知道使用的是什么数据库类型。因为它使用的是默认端口，这可能意味着更少的安全控制已经到位。

重要提示

将端口更改为不同的服务通过模糊性增加了一点安全性。但是，这可能是一个迹象，表明可以在目标上实现更多的安全性。

现在，我们可以继续深入了解如何访问 Aurora 实例。这将需要使用用户名和密码 list 进行一些暴力强制。

## 枚举用户名和密码

现在我们有了关于正在运行的服务的更多信息，我们需要继续并开始攻击这些服务。对于我们的白盒 pentest 方法的下一步，我们将开始查看是否可以找到一些弱密码。如果我们发现用户名和密码，就可以直接访问目标。

一个快速发现用户名和密码的好方法是尝试对服务和设备使用默认名称。在我们的例子中，我们知道 MySQL 使用默认用户名**admin**。既然我们知道这一点，我们将使用**admin**用户名进行暴力攻击，并使用可在 GitHub 上通过以下步骤找到的密码列表：

1.  To get the password list, run the following command:

    **$wgethttps://raw.githubusercontent.com/PacktPublishing/AWS-Penetration-Testing/master/Chapter%206%3A%20Setting%20up%20and%20pentesting%20AWS%20Aurora%20RDS/mssql-betterdefaultpasslist.txt**

2.  If you open the file, you'll notice that the list has both usernames and passwords – we only want the passwords. We can use the **awk** command to slice and print only the passwords and store them in a new file:

    **$cat mssql-betterdefaultpasslist.txt | awk-F:{'print$2'}>AuroraPasswords.txt**

3.  Now that we have our list of passwords generated, it's time to take a look and see whether we can get the username and password to Aurora. We will use Metasploit to execute this. First, you'll need to start up Metasploit:

    **$msfdb 运行**

4.  Next, we will load the **mysql** login scanner:

    **$使用辅助/scanner/mysql/mysql\u 登录**

5.  Once you have your module loaded, you'll need to set a few parameters. Just as before in [*Chapter 5*](05.html#_idTextAnchor227), *Understanding Vulnerable RDS Services*, set the following parameters:

    **设置 RHOSTS<<极光实例>>**

    **设置用户名管理员**

    **将停止设置为成功**

    **设置密码文件 AuroraPasswords.txt**

6.  设置好所有参数后，使用**run**命令对 Aurora 主机执行扫描：

![Figure 6.7 – Brute-forcing for passwords ](image/Figure_6.07_B15630.jpg)

图 6.7–强制输入密码

我们已成功枚举用户名和密码：

*   **用户名**：**管理员**
*   **Password**: **password**

    重要提示

    使用默认密码是非常危险的！确保在发现时报告默认用户名和密码。适当的补救措施是将密码和用户名更改为符合**strong**用户名和密码准则的内容。

从这里开始，我们就拥有了可以访问和拥有一切权利的凭证。这将允许我们删除数据库和表，以及添加我们自己的后门。当发现弱凭证时，强调其涉及的问题非常重要，因为正如您所看到的，我们能够接管数据库！

现在我们对后端的工作有了更好的了解，让我们来看看我们如何通过建立我们自己的脆弱的 BATSH 来破解（道德上的）前端。

# 建立 SQLi 实验室

我们将要进行的下一个练习涉及设置 EC2 实例，安装易受攻击的 web 程序，以及在 EC2 实例上安装 Docker 服务。一旦一切就绪并开始运行，我们将开始研究一些实际的 SQLi 并测试 web 应用程序的易受攻击区域。

我们正在安装的易受攻击的应用程序**Juice Shop**是一款非常受欢迎的 web 应用程序，它充满了各种各样的黑客挑战——它甚至配有一个黑客仪表盘，您可以使用它来跟踪您的进度。为了了解更多有关此应用程序的信息，OWASP 有一个页面，其中充满了有关该项目的有用信息（[https://owasp.org/www-project-juice-shop/](https://owasp.org/www-project-juice-shop/) ）。

重要提示

本练习不涉及 Aurora–它涉及 SQLi 和 pentesting 参数，您可能会看到这些参数与使用 Aurora 的网站一起使用。本练习的目的是更熟悉 SQLi 及其危险性。

首先，您需要设置一个 EC2 实例。到目前为止，您应该已经习惯于设置实例；但是，如果您需要复习，请参考[*第 1 章*](01.html#_idTextAnchor025)*构建您的 AWS 环境*！

进入 EC2 仪表板后，请执行以下步骤以启动并运行实例：

1.  点击**启动实例**。
2.  Select an **Amazon Machine Image** (**AMI**). The AMI we are using is **Amazon ECS-Optimized Amazon Linux 2 AMI**:

    ![Figure 6.8 – Selecting the correct image for the SQLi lab ](image/Figure_6.08_B15630.jpg)

    图 6.8–为 SQLi 实验室选择正确的图像

3.  Configure **Instance Details**, unfold **Advanced Details**, and copy the following script into **User Data**:

    **#/bin/bash**

    **百胜更新-y**

    **百胜安装-y docker**

    **服务码头启动**

    **docker pull Bkiminich/果汁店**

    **docker run-d-p 80:3000 bkimminich/果汁店**

4.  当您到达安全组时，确保**80**端口对进出流量的所有人开放。
5.  启动您的实例。
6.  Open a browser and search for the public DNS name of your EC2 instance. The easiest way to do that is to right-click on the instance and select **Connect**; the public DNS will display in the pop-up window. You can also click on the instance in your EC2 dashboard and see the public DNS name in the bottom right-hand corner.

    重要提示

    如果您忘记设置用户数据脚本，请连接到您的实例并制作一个包含*步骤 3*中的脚本的**.sh**脚本。

您可能无法通过 HTTP 进行连接。一个常见问题是在设置 EC2 时错误配置安全组。如果无法通过 HTTP 进行连接，请确保您的安全组允许您进行连接。请参阅以下屏幕截图，确保安全组设置正确：

![Figure 6.9 – Security group dashboard ](image/Figure_6.09_B15630.jpg)

图 6.9–安全组仪表板

一旦你完成设置，一旦你在你的网络浏览器中连接到你的公共 DNS，你应该会看到果汁店的主仪表板。要查看应用程序，请将 EC2 实例的公共 DNS 名称放入浏览器，然后点击*输入*：

![Figure 6.10 – The Juice Shop dashboard ](image/Figure_6.10_B15630.jpg)

图 6.10–果汁店仪表板

干得好，我们成功地在 AWS 建立了自己的脆弱实验室。在我们进一步走动之前，让我们先看看一些快速清理项目，然后再做一些测试。

## 配置果汁店自动启动

在继续之前，我们想做一个快速的**内务处理**步骤，在 EC2 实例启动时为我们自动启动 Juice 商店。每次我们启动实例时都必须手动启动服务可能是一件痛苦的事情，这有助于节省我们的一些时间，这样我们就不必总是在实例上线时手动启动服务。

让我们将其分解为以下步骤：

1.  You'll need to make a one-liner script that will initiate on startup. There are two different ways we can do this. First, navigate to the **init.d** directory:

    **$cd/etc/init.d**

2.  Once you're in the directory, make a script that **init** can call at startup. In this case, we will call it **juiceShop.sh**:

    **$sudo vi juiceShop.sh**

3.  Place the following script in the file and save it:

    **#/bin/bash**

    **sudo sudo docker run-d-p 80:3000 Bkiminich/果汁店**

另一种方法是将其添加到实例的**cron 作业**中。cron 作业是一种基于时间的作业，用户可以在 Unix 操作系统上安排它。**作业**是一个任务集，可以在用户设置的任何时间间隔运行。在我们的例子中，我们希望 Juice Shop 在实例启动时运行。要执行此操作，请在 EC2 终端中键入以下命令：

$@reboot sudo sudo docker run-d-p 80:3000 bkiminich/果汁店

现在，我们有了一个 Juice Shop 工作版本的实例，开始测试 SQLi！在向前移动之前，通过重启实例，确保您的实例在启动时自动启动 Juice Shop。

现在，让我们开始对易受攻击的实例执行 SQLi 和 pentest。

# SQLi 的乐趣

现在我们已经准备好了一切，让我们继续前进，在易受攻击的 web 应用程序 Juice Shop 上进行一些 pentesting。如果您需要了解什么是 SQLi 及其工作原理，请查阅[*第 5 章*](05.html#_idTextAnchor227)*了解易受攻击的 RDS 服务*。

在开始之前，我们需要确保以下几点：

1.  我们的带有 Juice Shop 的 EC2 实例已启动，并可通过 web 浏览器访问。这将确保我们可以访问它进行以下练习。
2.  我们的*本地*Kali Linux 虚拟机在虚拟机箱中启动。

完成这两个步骤后，转到 Juice Shop EC2 实例的公共 DNS。接下来，让我们转到*记分牌*，看看 web 应用程序面临哪些挑战。

移动到 web 浏览器中的目录：http://<<public dns="">>/#/score board/：</public>

![Figure 6.11 – The Juice Shop scoreboard ](image/Figure_6.11_B15630.jpg)

图 6.11–果汁店记分牌

重要提示

在 web 应用程序中，查找**/记分板**是一项挑战。如果您想尝试各种方法来查找它，我建议您使用目录搜索工具，例如**gobuster**、**dirb**或**dirbuster**。

如你所见，我们有很多挑战可供选择。我们只将重点放在注入挑战上；不过，也可以随意看看其他挑战。由于我们只想执行注入任务，请单击**隐藏所有**删除所有任务–这将使所有挑战消失。完成所有任务后，单击**注入**–这将显示所有注入挑战：

![Figure 6.12 – The Juice Shop scoreboard with injection only ](image/Figure_6.12_B15630.jpg)

图 6.12–仅带注射的果汁店记分牌

正如你所看到的，我们有大量的挑战可供选择。每个挑战旁边都有许多星星–这些星星表示每个挑战的难度。明星越多，挑战就越困难。让我们将这些挑战中的每一个都作为一项任务，我们将进行实际的五分钟测试。

我们的第一个挑战将是绕过管理员登录提示，并将管理员 access 添加到 web 应用程序。

## 绕过管理员登录

好的，让我们从一个简单的挑战开始，这个挑战通常是五分钟测试期间的实际“范围内”任务。范围内任务是在 pentest（任务）期间允许（范围内）和需要的任务。这意味着客户希望您就特定任务提供反馈，例如结果、手动评估和关注领域。在我们的例子中，我们需要提供有关 web 应用程序的反馈，以及如何测试它，以及如何修复它。

所以，让我们假设 Juice Shop 在 AWS 内开设了一家新商店。他们希望我们测试登录页面的功能，看看它是否容易受到任何注入的攻击。这样做有助于让 Juice Shop 了解其 web 应用程序的安全性以及需要修复的内容。这是一种积极主动的方法，因为他们希望我们评估安全性，而不是法规遵从性。

重要提示

测试法规遵从性并不意味着您正在测试安全性。合规性测试需要遵循项目清单，以测试在总体方案中哪些项目可能“安全”，哪些项目可能不安全。

让我们从五旬斋开始吧！

1.  To start off, we need to go to the login page. The login page can be found at the following:

    **<<公共 dns>>/#/登录**

    我们将看到以下屏幕：

    ![Figure 6.13 – Login page for Juice Shop ](image/Figure_6.13_B15630.jpg)

    图 6.13–果汁店登录页面

    太好了，现在我们有了登录页面。

2.  接下来，让我们使用一些奇怪的参数来测试登录页面是否正确处理输入。要测试登录输入功能，请将**放入用户名字段。密码可以是您想要的任何内容：**

 **![Figure 6.14 – Checking for an error ](image/Figure_6.14_B15630.jpg)

图 6.14-检查错误

然后，我们得到一个错误，如下所示。

![Figure 6.15 – Error from input ](image/Figure_6.15_B15630.jpg)

图 6.15–输入错误

您可以看到，它为我们提供了一个声明对象的错误。这告诉我们它没有处理输入验证——然而，它并没有真正告诉我们它是什么类型的语法错误。从这里开始，我们需要对执行注入所需的语法类型进行一些有根据的猜测。

我们将尝试使用一个简单的**TRUE**语句，允许我们的管理员访问该网站。和以前一样，在本例中，密码并不重要。我们关注的是电子邮件字段的输入。在 email 字段中，输入以下 true 语句：**或‘1’=‘1’--**：

![Figure 6.16 – Testing SQLi ](image/Figure_6.16_B15630.jpg)

图 6.16–测试 SQLi

正如您在上一个屏幕截图中所看到的，我们拥有管理员权限！这是因为输入字段不清理输入，只要语句为 true，就会执行任何输入。在我们的例子中，**1=1**为真，因此命令被处理。同样，如果您需要有关 SQLi 的复习，请返回[*第 5 章*](05.html#_idTextAnchor227)*了解易受攻击的 RDS 服务*进行复习。

现在我们可以以管理员身份登录，让我们看看这对非管理员用户有何影响。接下来，我们将看到我们可以作为什么类型的用户登录。

## 以其他用户身份登录

现在我们有了管理员权限，让我们看看是否可以作为另一个用户进行透视和登录。能够在妥协后显示内部运动对 pentesting 和报告至关重要。如果您能够在整个网络中转移注意力，并在不被注意的情况下拥有其他帐户的所有权，这将告诉客户端他们的检测过程有多好。

重要提示

报告缺乏检测和警报是 pentesting 的一大部分。如果目标没有标记您并发出警报，则意味着他们不会在其网络中看到攻击者。

有一个名为**bender**的用户可能在他们的帐户上拥有有价值的信息。出于密集型目的，我们将看到我们被指派使用**收割机**等工具查找用户，并在侦察过程中找到了他。有人要求我们看看能否持有这个帐户。为了测试这一点，我们首先需要了解 Juice Shop 上电子邮件的命名法：

![Figure 6.17 – Getting the email scheme  ](image/Figure_6.17_B15630.jpg)

图 6.17–获取电子邮件方案

侦察成功后，我们看到邮箱地址域为**@juice-sh.op**。现在，我们可以返回登录页面，并使用与前面相同的方法进行测试：

![Figure 6.18 – Testing SQLi with benders account ](image/Figure_6.18_B15630.jpg)

图 6.18-使用 benders 帐户测试 SQLi

您将收到如下横幅的提示：

*您成功解决了挑战：登录 Bender*

我们现在已经成功完成了分配给我们的任务，并将能够提交一份关于我们如何成功获得管理员帐户和**bender**用户帐户的报告。

现在，我们已经执行了一些 SQLi 并执行了它，让我们开始了解如何预防它，以及如何告诉客户和企业他们如何帮助缓解组织中的任何潜在问题。

## 预防 SQLi

让我们快速讨论一下如何防止 SQLi。正如我们之前所看到的，SQLi 可以是一种简单的战术，如果不正确缓解，它可以为攻击者提供通往王国的*钥匙。既然我们已经做了第一手，让我们来看看防止它的方法！*

在评估 Juice Shop 时，我们能够通过在**电子邮件**字段中输入真实陈述来利用该应用程序。由于**电子邮件**部分中的输入字段未**参数化**，SQLi 成功。下面的示例说明了错误的查询语句和良好的查询语句。这些语句位于实际数据库中：

**username=“从用户中选择*，其中 email=”+email+”；**

**username=“从电子邮件=？”的用户中选择*”；**

将执行这两个查询；但是，只有**第二个**查询只使用电子邮件查询，而不是第一个查询，它查看正在传递的整个参数，并将命令解释为一个完整的 SQL 查询。这就是我们如何在 Juice Shop 上获得管理员帐户的方法。不是处理整个字符串，而是使用 SQL 语句和电子邮件构造语句。

现在我们已经研究了 Sql 的工作原理和减轻它的方法，让我们来看看我们如何能够减轻一个最危险的攻击，即发生在 YouStutt0 上的 U-AWS 企业：

# 避免 DoS

**DoS**是一个严重的 web 应用程序漏洞，能够中断服务和应用程序的可用性。DoS 的目标是关闭目标网络、服务或应用程序，并使用户和管理员无法访问这些网络、服务或应用程序，但最终，用户是主要的目标受众。

DoS 攻击的一个更复杂、更具破坏性的版本是**DDoS**攻击—使用多台攻击者机器攻击目标主机。DDoS 攻击通常是高度熟练和有计划的攻击，使用僵尸网络向目标释放大量不必要的流量。

重要提示

僵尸网络是一个大型的受损机器集群，用于执行那些机器所有者未知的恶意攻击。

DDoS 攻击有两种截然不同的分类：

*   基础设施层攻击
*   应用层攻击

让我们来看看这两个分类的细节。虽然我们无法在 AWS 中实际执行任何 DoS 操作，但深入分类并研究如何最大限度地减少 AWS 环境成为 DoS 或 DDoS 受害者的可能性仍然是一件好事。

## 基础设施层攻击

此层的攻击通常是诸如 SYN 洪泛和其他耗尽受害者主机上资源的攻击。它们的工作原理是向目标发送大量流量，使其不可用。这些类型的攻击通常不会在 pentest 期间使用，因为如果成功，它们将完全关闭客户端的基础设施。但是，寻找可能表明客户端基础设施未准备好处理 DoS 攻击的指标仍然是一种良好的做法，例如缺少从多个主机检测到的格式错误的数据包，或者没有检测到 DDoS 攻击使用的某些特征码。

## 应用层攻击

这种类型的攻击是一种不太常见的攻击向量，你会看到；然而，这实际上是你在五旬节期间可能会做的事情。应用层的攻击涉及查看应用程序，而不是整个公司，如果可能的话，查看“破坏”应用程序。在 pentesting 中，对应用程序的 DoS 攻击可能会使应用程序模糊化，直到应用程序出错，无法再运行。这是**缓冲区溢出**中非常常见的技术。

虽然在本书中我们不会深入讨论缓冲区溢出问题，但我强烈建议您看看一些初学者友好的练习，这些练习将帮助您熟悉这个概念（[https://github.com/stephenbradshaw/vulnserver](https://github.com/stephenbradshaw/vulnserver) ）。

## AWS 中的 DDoS 防护

既然我们了解了 DDoS 可能给企业带来的问题，那么我们就必须了解一些关于如何保护免受中断式攻击的概念。重要的是要确保您的基础设施周围有不允许未经请求的流量的保护措施，并且制定了只允许所需流量的规则。您的客户业务需要了解什么是正常流量，什么不是正常流量。

备份和扩展对于确保您免受 DDoS 攻击至关重要。如果已经实现了适当的扩展，那么如果另一个系统由于错误或攻击而停机，另一个系统可以恢复空闲。AWS 有一个名为**AWS Shield**的应用程序——一个奇妙的 DDoS 管理应用程序（[https://aws.amazon.com/shield/](https://aws.amazon.com/shield/) ）。

使用**web 应用程序防火墙**（**WAFs**）是保护您拥有的任何面向 web 的公共应用程序的好方法，尤其是当它们用于员工和客户时。AWS WAF 提供了可定制的 web 安全性，允许管理员在攻击 web 应用程序之前识别和删除目标。

# 总结

在本章中，我们学习了 Aurora 及其在 AWS 中的使用。我们建立了自己的 Aurora 实例，并学习了如何使用常见的 pentesting 技术查找错误配置。接下来，我们学习了如何在 EC2 实例中建立 SQLi 实验室，并练习了一些常见的注入方法，这些方法将在实际的 pentest 中看到。在本章的最后，我们讨论了拒绝服务攻击及其对业务的影响。

现在您已经完成了本章，您可以在 AWS 中建立自己的实验室，让您能够在安全和授权的环境中测试 SQLi 攻击，并了解 pentesting Amazon Aurora 的基础知识。

在下一章中，我们将了解 Lambda 服务，并学习如何在 Lambda 中查找错误配置。

# 进一步阅读

*   与极光的查询：[https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-mysql-parallel-query.html](https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/aurora-mysql-parallel-query.html)
*   在 AWS 中设置 WordPress:[https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/php-hawordpress-tutorial.html](https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/php-hawordpress-tutorial.html)**